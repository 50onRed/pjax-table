!function(t,e){function n(e){function n(t,e){return{order:t+"__"+e,page:1}}function a(){t.pjax({url:E,data:z,push:A,container:R})}function r(){var e=N.find("#"+$),a=N.find(".ui-pagination");if(I){var r=a.data("current-page"),i=a.data("current-perpage");t.extend(z,{perpage:i}),t.extend(z,{page:r})}var o=e.data("current-sort-property"),d=e.data("current-sort-direction");o?t.extend(z,n(o,d)):delete z.order,t.extend(z,e.data("custom-filters"))}function i(){K=N.find("#fifty-table").data("total-rows"),S=N.find("tbody")}function o(){function e(e,n){var a=S.find('td[data-value="'+n+'"]').parent(),r=S.find("tr"),i=r.index(e),o=r.index(a),d=Math.min(i,o),c=Math.max(i,o);r.slice(d,c+1).each(function(){t(this).addClass("ui-selected").children().first().find("input").prop("checked",!0)})}r(),i(),N.on("pjax:timeout",function(t){t.preventDefault()}),N.on("pjax:success",function(t){i(),t.stopPropagation(),N.trigger("load.table")}),N.on("pjax:error",function(t){t.stopPropagation()}),N.on("click",'th[data-sortable="true"]',function(e){var r=t(e.target).closest('th[data-sortable="true"]'),i=r.data("property"),o=M[r.data("current-sort-direction")]||r.data("default-sort-direction");N.trigger("sort.table",{direction:o,property:i}),t.extend(z,n(i,o)),a()}),N.on("click",".ui-perpage-dropdown > li",function(e){var n=t(e.currentTarget).data("value");N.trigger("perpage.table",{perpage:n}),t.extend(z,{perpage:n,page:1}),a()}),N.on("click",".ui-page-select-dropdown > li",function(e){var n=t(e.currentTarget).data("value");N.trigger("page.table",{page:n}),t.extend(z,{page:n}),a()}),N.on("click",".ui-prev-page",function(){var e=parseInt(N.find(".ui-pagination").data("current-page"));N.trigger("prevpage.table",{page:e-1}),t.extend(z,{page:e-1}),a()}),N.on("click",".ui-next-page",function(){var e=parseInt(N.find(".ui-pagination").data("current-page"));N.trigger("nextpage.table",{page:e+1}),t.extend(z,{page:e+1}),a()}),N.on("change",'th[data-select-all-enabled="true"] input[type="checkbox"]',function(){var e=t(this),n=e.parent("th").data("property");e.prop("checked")?(N.find("td[data-property="+n+'] input[type="checkbox"]').prop("checked",!0),S.find("tr").addClass("ui-selected"),N.trigger("select_all.table")):(N.find("td[data-property="+n+'] input[type="checkbox"]').prop("checked",!1),S.find("tr").removeClass("ui-selected"),N.trigger("deselect_all.table"))}),N.on("click",'td[data-property="id"]',function(e){t(this).closest("tr").data("shiftKey",e.shiftKey)}),N.on("change",'input[type="checkbox"]',function(){var n=t(this),a=t(this).closest("tr"),r=h(a.get(0)),i=N.data("last_selected");n.prop("checked")?(i&&a.data("shiftKey")&&e(a,i),N.data("last_selected",r.id),a.addClass("ui-selected"),N.trigger("select.table",r)):(N.data("last_selected",null),a.removeClass("ui-selected"),N.find('th[data-select-all-enabled="true"] input[type="checkbox"]').prop("checked",!1),N.trigger("deselect.table",r))}),N.on("click",".tooltip",function(e){t(e.target).tooltip()}),d(),c()}function d(){e.plugins&&j(e.plugins)}function c(){var t,n;if(e.refreshEvents){t=e.refreshEvents.length;for(var a=0;t>a;a++)n=e.refreshEvents[a],n.filter?N.on(n.eventName,n.filter,function(){f()}):N.on(n.eventName,function(){f()})}}function u(t){return p(t),a(),C}function f(){return a(),C}function l(){return E}function p(t){for(var e in t)"undefined"==typeof t[e]||null===t[e]?delete z[e]:z[e]=t[e];return C}function s(e){if(!e)return C;if("string"==typeof e)delete z[e];else if(Array.isArray(e))for(var n=0;n<e.length;n++)delete z[e[n]];else{if("function"!=typeof e)throw new Error("Must provide a string or array");t.each(z,function(t,n){e(t,n)&&delete z[t]})}return C}function g(e){var n=t.extend({},z);return"function"==typeof e&&t.each(n,function(t,a){e(t,a)||delete n[t]}),n}function h(e){var n={additional_fields:{}};return t(e).children().each(function(){var e=t(this),a=e.data();n[a.property]=a.value,t.each(e.data(),function(t,e){"property"!==t&&"value"!==t&&"function"!=typeof e&&"object"!=typeof e&&(n.additional_fields[t]=e)})}),n}function y(t){return S.find("tr").filter(function(){return h(this).id===t?!0:!1}).get(0)}function v(e,n,a){var r,i,o=t(e);t.each(n,function(t,e){r=o.find('td[data-property="'+t+'"]'),r.data(t,e),i=r.data("format"),i&&(e=F[i](e)),r.find(r.data("display-target")).text(e),"function"==typeof a&&a(r,t,e)})}function x(){return S.find("tr").length}function b(){return S.find("tr.ui-selected").length>0}function m(){return S.find("tr.ui-selected").length}function k(t){return S.find("tr.ui-selected").map(function(){return"function"==typeof t?t(h(this)):h(this)}).get()}function w(){return k().map(function(t){return t.id})}function _(){return S.find("tr").map(function(){return h(this)}).get()}function j(e){t.each(e,function(e,n){N.on("click",n.target,function(e){var a=t(e.currentTarget);a.data("plugin-initialized")||(a[n.constructorName](t.extend({},n.options,{queryState:t.extend({},z),record:h(a.closest("tr").get(0))})),a.data("plugin-initialized",!0))})})}function P(t,e,n){v(y(t),e,n)}function T(){return K}var C={},e=e||{},N=t(this),S=null,$=N.data("fifty-table-id"),E=N.data("pjax-url")||window.location.pathname,R=N.data("pjax-container"),A=N.data("push-state-enabled"),I=N.data("paginated"),K=null,M={asc:"desc",desc:"asc"},z={},F={usd:function(t){return numeral(t).format("$0,0.00")},usd_thousandth:function(t){return numeral(t).format("$0,0.000")}};return o(),t.extend(C,{update:u,refresh:f,refreshPlugins:d,getUrl:l,updateParameters:p,removeParameters:s,getParameters:g,getNumRecords:x,hasSelected:b,getNumSelected:m,getSelected:k,getSelectedIds:w,getAllRecords:_,applyPlugins:j,updateRow:P,getTotalRows:T}),C}t.fn.fiftyTable=e.widget("table",n)}(jQuery,window.Fifty=window.Fifty||{}),$(function(){$("[data-fifty-table][data-auto-init]").each(function(){$(this).fiftyTable({})})});